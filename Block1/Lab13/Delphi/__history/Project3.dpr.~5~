Program Project3;

Uses
  System.SysUtils;

Var
    Check: String;
    EPS, X, Num, Sin: Real;
    I, N: Integer;

Begin
    Writeln('Данная программа считает значение функции f(x) = sin^2(x) для введённого значения X, а также подсчитывает количество чисел из ряда Маклорена больших EPS.');
    Writeln;

    I := 1;
    While(I = 1) Do
    Begin
        Try
            Write('Введите EPS: ');
            Readln(Check);
            EPS := StrToFloat(Check);
            If (EPS > 0) Then
            Begin
                 I := 0;
            End
            Else
            Begin
                 Writeln('EPS должен быть больше нуля!');
            End;
        Except
            Writeln('Проверьте корректность ввода данных!');
        End;
    End;
    I := 1;
    While(I = 1) Do
    Begin
        Try
            Write('Введите X: ');
            Readln(Check);
            X := StrToFloat(Check);
            I := 0;
        Except
            Writeln('Проверьте корректность ввода данных!');
        End;
    End;

    Sin := 0;
    N := 1;
    Num := 1;

    I := 1;
    While (I = 1) Do
    Begin
        For I := 1 To N - 1 Do
            Num := Num * (-1);
        For I := 1 To 2 * N - 1 Do
            Num := Num * 2;
        For I := 1 To 2 * N Do
            Num := Num * X;
        For I := 1 To 2 * N Do
            Num := Num / I;

        If (Num < 0) Then
        Begin
            If (-Num < EPS) Then
                I := 0;
        End
        Else
        Begin
            If (Num < EPS) Then
                I := 0;
        End;

        Sin := Sin + Num;
        Num := 1;
        N := N + 1;
    End;

    Writeln('Sin: ', Sin, '; N: ', N);

    Readln;
End.
